<% if scope.lookupvar('rsyslog::server::mytemplateh') and ! scope.lookupvar('rsyslog::server::mytemplateh').empty?-%>
<% scope.lookupvar('rsyslog::server::mytemplateh').flatten.compact.each do |mytemplateh| -%>
if<%- if mytemplateh['facility'] -%> $syslogfacility-text == "<%= mytemplateh['facility'] %>" and<% end %> <%- if mytemplateh['tag'] -%> $syslogtag == "<%= mytemplateh['tag'] %>" <% end %>then -?<%= mytemplateh['tname'] %>
<% end -%>
<% end -%>
